# Template for setting up the Ubuntu build environment and building Xournal++ on
# Ubuntu
name: Install dependencies
inputs:
  gcc_version:
    required: true
    type: string
  extra_packages:
    required: false
    type: string
    default: ''

runs:
  using: composite
  steps:
    - name: 'Install dependencies'
      shell: bash
      env:
        # Those packages are required for building. To add extra packages (e.g. for packaging purposes), use inputs.extra_packages
        packages: >-
          ${{inputs.extra_packages}}
          librsvg2-dev
          gcc-${{ inputs.gcc_version }}
          g++-${{ inputs.gcc_version }}
          cmake ninja-build
          libgtk-3-dev
          libpoppler-glib-dev
          portaudio19-dev
          libsndfile1-dev
          liblua5.3-dev
          libzip-dev
          gettext
          help2man
          libgtest-dev
          libgtksourceview-4-dev
      run: |
        sudo apt-get update
        sudo apt-get install -y ${{env.packages}}
        g++ --version
    - name: 'Set environment variables'
      shell: bash
      run: |
        echo "CC=gcc-${{ inputs.gcc_version }}" >> $GITHUB_ENV
        echo "CXX=g++-${{ inputs.gcc_version }}" >> $GITHUB_ENV
